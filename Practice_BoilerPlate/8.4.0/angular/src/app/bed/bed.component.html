<div [@routerTransition]>
  <section class="content-header">
    <div class="container-fluid">
      <div class="row">
        <div class="col-6">
          <h1>{{ "Beds" | localize }}</h1>
        </div>
        <div class="col-6 text-right">
          <a href="javascript:;" class="btn bg-blue" (click)="createBed()">
            <i class="fa fa-plus-square"></i>
            {{ "CreateNewBed" | localize }}
          </a>
        </div>
      </div>
    </div>
  </section>

  <section class="content px-2">
    <div class="container-fluid">
      <!-- Tabs -->
      <ul class="nav nav-tabs mb-3">
        <li class="nav-item">
          <a class="nav-link" [class.active]="activeTab === 'list'" (click)="activeTab = 'list'">
            {{ "BedList" | localize }}
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="activeTab === 'status'" (click)="activeTab = 'status'">
            {{ "BedStatusChart" | localize }}
          </a>
        </li>
      </ul>

      <!-- Tab 1: Bed List -->
      <div *ngIf="activeTab === 'list'">

        <!-- Filters -->
        <div class="card mb-3">
          <div class="card-body">
            <form (ngSubmit)="getDataPage(1)">
              <div class="form-row">
                <div class="col-md-4">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="{{ 'SearchKeyword' | localize }}"
                    [(ngModel)]="keyword"
                    name="keyword"
                  />
                </div>
                <div class="col-md-2">
                  <select class="form-control" [(ngModel)]="isActive" name="isActive">
                    <option [ngValue]="null">{{ "All" | localize }}</option>
                    <option [ngValue]="true">{{ "Active" | localize }}</option>
                    <option [ngValue]="false">{{ "Inactive" | localize }}</option>
                  </select>
                </div>
                <div class="col-md-2">
                  <button type="submit" class="btn btn-primary">
                    <i class="fa fa-search"></i> {{ "Search" | localize }}
                  </button>
                </div>
                <div class="col-md-2">
                  <button type="button" class="btn btn-secondary" (click)="clearFilters()">
                    <i class="fa fa-times"></i> {{ "Clear" | localize }}
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>

        <!-- Bed Table -->
        <div class="card">
          <div class="card-body table-responsive">
            <table class="table table-bordered table-hover">
              <thead>
                <tr>
                  <th (click)="changeSorting('bedNumber')" style="cursor:pointer">
                    {{ "Bed Number" | localize }}
                  </th>
                  <th (click)="changeSorting('type')" style="cursor:pointer">
                    {{ "Type" | localize }}
                  </th>
                  <th (click)="changeSorting('status')" style="cursor:pointer">
                    {{ "Status" | localize }}
                  </th>
                  <th style="width: 120px;">{{ "Actions" | localize }}</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let bed of beds | slice:(pageNumber - 1) * pageSize:(pageNumber * pageSize)">
                  <td>{{ bed.bedNumber }}</td>
                  <td>{{ getTypeString(bed.type) }}</td>
                  <td>{{ gettypeString(bed.status) }}</td>
                  <td>
                    <button class="btn btn-sm btn-primary mr-1" (click)="editBed(bed)">
                      <i class="fa fa-edit"></i>
                    </button>
                    <button class="btn btn-sm btn-danger" (click)="delete(bed)">
                      <i class="fa fa-trash"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>

            <!-- Simple Pagination -->
            <div class="mt-3 d-flex justify-content-between">
              <button class="btn btn-sm btn-secondary" [disabled]="pageNumber === 1" (click)="pageNumber = pageNumber - 1">
                {{ "Previous" | localize }}
              </button>

              <span>{{ "Page" | localize }} {{ pageNumber }}</span>

              <button
                class="btn btn-sm btn-secondary"
                [disabled]="(pageNumber * pageSize) >= totalItems"
                (click)="pageNumber = pageNumber + 1">
                {{ "Next" | localize }}
              </button>
            </div>

          </div>
        </div>
      </div>

      <!-- Tab 2: Placeholder for Chart -->
      <div *ngIf="activeTab === 'status'">
        <div class="card">
          <div class="card-body">
            <h5>{{ "Bed Status Distribution" | localize }}</h5>
            <div style="max-width: 500px; margin: 0 auto;">
              <canvas
                baseChart
                [datasets]="bedStatusChartData"
                [labels]="bedStatusChartLabels"
                [options]="bedStatusChartOptions"
                [type]="bedStatusChartType">
              </canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
